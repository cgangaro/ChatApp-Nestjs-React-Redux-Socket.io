{"ast":null,"code":"var _jsxFileName = \"/Users/cgangaro/chat-app_Nestjs-React_Redux-Socket.io/fronttest/src/Components/Chat.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"./CSS/FriendsList.css\";\nimport \"./CSS/All.css\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actionCreators } from \"../State\";\nimport { bindActionCreators } from \"redux\";\nimport FriendsList from \"./FriendsList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Chat() {\n  _s();\n\n  const logData = useSelector(state => state.log);\n  const utilsData = useSelector(state => state.utils);\n  const clientList = useSelector(state => state.clientList);\n  const msg = useSelector(state => state.msg);\n  const dispatch = useDispatch();\n  const {\n    addClient,\n    removeClient,\n    setActivConvers,\n    conversAdd,\n    msgAdd\n  } = bindActionCreators(actionCreators, dispatch);\n  utilsData.socket.removeAllListeners();\n  utilsData.socket.on('friendsList', function (arrClient) {\n    console.log('Friends List received, useEffect()');\n\n    for (var i = 0; i < arrClient.length; i++) {\n      if (arrClient[i].username.length > 0 && arrClient[i].id != logData.id) {\n        console.log(`add client: ${arrClient[i].username}`);\n        addClient(arrClient[i]);\n        conversAdd(arrClient[i].username);\n      }\n    }\n  });\n  utilsData.socket.on('newFriend', function (client) {\n    console.log(`new Friend: ${client.username}, useEffect()`);\n\n    if (client.id != logData.id) {\n      addClient(client);\n      conversAdd(client.username);\n    }\n  });\n  utilsData.socket.on('removeFriend', function (client) {\n    console.log('removeFriend, useEffect()');\n    if (client.id != logData.id) removeClient(client);\n  });\n  utilsData.socket.on('msgInputToOtherClient', function (msgToSend) {\n    console.log(msgToSend.sender, 'said: ', msgToSend.text);\n    let newmsg = {\n      sender: msgToSend.sender,\n      text: msgToSend.text,\n      recipient: \"Me\"\n    };\n    msgAdd(newmsg);\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(FriendsList, {\n      clientList: clientList\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n\n_s(Chat, \"omMNRNr/OpvvVBEGDugzRlLHXyo=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useDispatch","useSelector","actionCreators","bindActionCreators","FriendsList","Chat","logData","state","log","utilsData","utils","clientList","msg","dispatch","addClient","removeClient","setActivConvers","conversAdd","msgAdd","socket","removeAllListeners","on","arrClient","console","i","length","username","id","client","msgToSend","sender","text","newmsg","recipient"],"sources":["/Users/cgangaro/chat-app_Nestjs-React_Redux-Socket.io/fronttest/src/Components/Chat.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport \"./CSS/FriendsList.css\"\nimport \"./CSS/All.css\"\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actionCreators, RootState } from \"../State\";\nimport { bindActionCreators } from \"redux\";\nimport { io } from \"socket.io-client\";\nimport { validateInput } from \"../Utils/logUtils\";\nimport { render } from \"@testing-library/react\";\nimport { Client, msg } from \"../State/type\";\nimport AffMsg from \"./AffMsg\";\nimport FriendsList from \"./FriendsList\";\n\nfunction Chat() {\n    \n    const logData = useSelector((state: RootState) => state.log)\n    const utilsData = useSelector((state: RootState) => state.utils)\n    const clientList = useSelector((state: RootState) => state.clientList)\n    const msg = useSelector((state: RootState) => state.msg)\n\n    const dispatch = useDispatch();\n\n    const { addClient, removeClient, setActivConvers, conversAdd, msgAdd } = bindActionCreators(actionCreators, dispatch);\n\n    utilsData.socket.removeAllListeners();\n\n    utilsData.socket.on('friendsList', function(arrClient: Client[]) {\n        console.log('Friends List received, useEffect()');\n        for (var i = 0; i < arrClient.length; i++)\n        {\n          if (arrClient[i].username.length > 0 && arrClient[i].id != logData.id)\n          {\n            console.log(`add client: ${arrClient[i].username}`)\n            addClient(arrClient[i]);\n            conversAdd(arrClient[i].username);\n          }\n        }\n      })\n      utilsData.socket.on('newFriend', function(client: Client) {\n        console.log(`new Friend: ${client.username}, useEffect()`);\n        if (client.id != logData.id)\n        {\n          addClient(client);\n          conversAdd(client.username);\n        }\n      })\n      utilsData.socket.on('removeFriend', function(client: Client) {\n        console.log('removeFriend, useEffect()');\n        if (client.id != logData.id)\n          removeClient(client);\n      })\n      utilsData.socket.on('msgInputToOtherClient', function(msgToSend: any) {\n        console.log(msgToSend.sender, 'said: ', msgToSend.text);\n        let newmsg: msg = {\n            sender: msgToSend.sender,\n            text: msgToSend.text,\n            recipient: \"Me\"\n        }\n        msgAdd(newmsg);\n    })\n  \n\n  return (\n    <>\n    <FriendsList clientList={clientList}/>\n    </>\n  );\n}\n\nexport default Chat;"],"mappings":"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"},"metadata":{},"sourceType":"module"}